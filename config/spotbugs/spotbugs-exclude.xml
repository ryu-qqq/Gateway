<?xml version="1.0" encoding="UTF-8"?>
<!--
    SpotBugs Exclusion Configuration
    Enterprise Spring Boot Standards

    @author Architecture Team (arch-team@company.com)
    @since 2024-01-01
-->
<FindBugsFilter>
    <!-- ========================================
         Exclude Generated Code
         ======================================== -->
    <Match>
        <Class name="~.*\.Q.*"/>  <!-- QueryDSL generated classes -->
    </Match>

    <Match>
        <Package name="~.*\.generated\..*"/>
    </Match>

    <!-- ========================================
         Exclude Test Code from Certain Rules
         ======================================== -->
    <Match>
        <Class name="~.*Test"/>
        <Bug pattern="DMI_HARDCODED_ABSOLUTE_FILENAME"/>
    </Match>

    <!-- Test classes use @BeforeEach for field initialization (Mockito pattern) -->
    <Match>
        <Class name="~.*Test"/>
        <Bug pattern="UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR"/>
    </Match>

    <!-- Test classes intentionally use null values for null-safety testing -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug pattern="NP_LOAD_OF_KNOWN_NULL_VALUE"/>
    </Match>

    <!-- Test classes use self-comparison for enum behavior testing -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug pattern="SA_LOCAL_SELF_COMPARISON"/>
    </Match>

    <!-- Test classes use self-comparison (code SA for field comparison) -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug code="SA"/>
    </Match>

    <!-- Test classes test non-localized string operations intentionally -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug pattern="DM_CONVERT_CASE"/>
    </Match>

    <!-- Test classes may create objects without throwing them for exception testing -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug pattern="RV_EXCEPTION_NOT_THROWN"/>
    </Match>

    <!-- Test classes may have null pointer dereference in test scenarios -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug pattern="NP_NULL_ON_SOME_PATH_FROM_RETURN_VALUE"/>
    </Match>

    <!-- Test classes may have dead stores for test setup/assertions -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug pattern="DLS_DEAD_LOCAL_STORE"/>
    </Match>

    <!-- Test classes may ignore return values for setup -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug pattern="RV_RETURN_VALUE_IGNORED_NO_SIDE_EFFECT"/>
    </Match>

    <!-- Test classes may have non-serializable anonymous inner classes -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug pattern="SE_BAD_FIELD_INNER_CLASS"/>
    </Match>

    <!-- Test classes may have serialization issues - not a concern for tests -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug code="Se"/>
    </Match>

    <!-- Test classes may have refactorable inner classes - not a concern -->
    <Match>
        <Class name="~.*Test.*"/>
        <Bug pattern="SIC_INNER_SHOULD_BE_STATIC_ANON"/>
    </Match>

    <!-- Domain VO may use non-localized case conversion intentionally -->
    <Match>
        <Or>
            <Class name="~.*\.vo\..*"/>
            <Class name="~.*\.domain\..*"/>
        </Or>
        <Bug pattern="DM_CONVERT_CASE"/>
    </Match>

    <!-- Application Command/Query DTOs are immutable records -->
    <Match>
        <Or>
            <Class name="~.*Command"/>
            <Class name="~.*Query"/>
        </Or>
        <Or>
            <Bug pattern="EI_EXPOSE_REP"/>
            <Bug pattern="EI_EXPOSE_REP2"/>
        </Or>
    </Match>

    <!-- ========================================
         Configuration Classes
         ======================================== -->
    <Match>
        <Class name="~.*Configuration"/>
        <Bug pattern="UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR"/>
    </Match>

    <!-- ========================================
         Spring Dependency Injection Pattern
         EI2: Storing externally mutable objects via constructor injection
         is a standard and safe practice in Spring DI
         ======================================== -->
    <!-- Spring @Component, @Service, @Repository, @Configuration classes -->
    <Match>
        <Or>
            <Class name="~.*Config"/>
            <Class name="~.*Filter"/>
            <Class name="~.*Handler"/>
            <Class name="~.*Adapter"/>
            <Class name="~.*Repository"/>
            <Class name="~.*Service"/>
            <Class name="~.*Controller"/>
            <Class name="~.*Interceptor"/>
        </Or>
        <Bug pattern="EI_EXPOSE_REP2"/>
    </Match>

    <!-- ========================================
         Spring @ConfigurationProperties Classes
         These require mutable getters/setters for property binding
         ======================================== -->
    <Match>
        <Class name="~.*Properties"/>
        <Or>
            <Bug pattern="EI_EXPOSE_REP"/>
            <Bug pattern="EI_EXPOSE_REP2"/>
        </Or>
    </Match>

    <!-- ========================================
         Request/Response DTO Records (immutable by design)
         Records with List fields need defensive copy which is impractical
         ======================================== -->
    <Match>
        <Or>
            <Class name="~.*Request"/>
            <Class name="~.*Response"/>
            <Class name="~.*Controller\$.*"/>
        </Or>
        <Or>
            <Bug pattern="EI_EXPOSE_REP"/>
            <Bug pattern="EI_EXPOSE_REP2"/>
        </Or>
    </Match>

    <!-- ========================================
         Test Fixtures
         ======================================== -->
    <Match>
        <Class name="~.*Fixture"/>
        <Bug pattern="VA_FORMAT_STRING_USES_NEWLINE"/>
    </Match>

    <!-- ========================================
         Redis Entity Classes (internal to adapter)
         These are simple data carriers, not exposed externally
         ======================================== -->
    <Match>
        <Class name="~.*Entity"/>
        <Or>
            <Bug pattern="EI_EXPOSE_REP"/>
            <Bug pattern="EI_EXPOSE_REP2"/>
        </Or>
    </Match>

    <!-- Adapter classes may use non-localized string conversion -->
    <Match>
        <Class name="~.*Adapter"/>
        <Bug pattern="DM_CONVERT_CASE"/>
    </Match>
</FindBugsFilter>
