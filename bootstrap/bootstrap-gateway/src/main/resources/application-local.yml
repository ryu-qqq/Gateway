# ===============================================
# Local Environment Configuration
# ===============================================
# 로컬 개발 환경 전용 설정
# 공통 설정은 application.yml 참조
#
# @author Development Team
# @since 1.0.0
# ===============================================

spring:
  config:
    import:
      - classpath:redis.yml
      - classpath:redis-local.yml

  # Redis (Local)
  data:
    redis:
      host: localhost
      port: 6379
      timeout: 3s
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 2

# ===============================================
# Sentry (Disabled for Local)
# ===============================================
sentry:
  dsn: ""

# ===============================================
# Gateway Routing (Local Static URIs)
# ===============================================
# discovery.enabled는 gateway.yml에서 프로파일별 설정
gateway:
  routing:
    services:
      # ============================================
      # AuthHub Service
      # ============================================
      - id: authhub
        uri: ${AUTH_HUB_URL:http://localhost:8080}
        port: 8080
        paths:
          - /api/v1/auth/**
        public-paths:
          - /api/v1/auth/login
          - /api/v1/auth/refresh
          - /api/v1/auth/logout
          - /api/v1/auth/.well-known/**
          - /api/v1/auth/jwks
          - /api/v1/auth/api-docs/**
          - /api/v1/auth/swagger
          - /api/v1/auth/swagger-ui/**
          - /api/v1/auth/docs/**

      # ============================================
      # MarketPlace Service
      # ============================================
      - id: marketplace
        uri: ${MARKETPLACE_URI:http://localhost:8080}
        port: 8080
        paths:
          - /api/v1/market/**
        public-paths:
          - /api/v1/market/auth/login
          - /api/v1/market/auth/refresh
          - /api/v1/market/api-docs/**
          - /api/v1/market/swagger
          - /api/v1/market/swagger-ui/**
          - /api/v1/market/docs/**

      # ============================================
      # Commerce Service
      # ============================================
      - id: commerce
        uri: ${COMMERCE_URI:http://localhost:8081}
        paths:
          - /api/v1/commerce/**
        public-paths:
          - /api/v1/commerce/api-docs/**
          - /api/v1/commerce/swagger
          - /api/v1/commerce/swagger-ui/**
          - /api/v1/commerce/docs/**

      # ============================================
      # FileFlow Service
      # ============================================
      - id: fileflow
        uri: ${FILEFLOW_URI:http://localhost:8082}
        paths:
          - /api/v1/file/**
        public-paths:
          - /api/v1/file/api-docs/**
          - /api/v1/file/swagger
          - /api/v1/file/swagger-ui/**
          - /api/v1/file/docs/**

      # ============================================
      # CrawlingHub Service
      # ============================================
      - id: crawling
        uri: ${CRAWLING_URI:http://localhost:8083}
        paths:
          - /api/v1/crawling/**
        public-paths:
          - /api/v1/crawling/api-docs/**
          - /api/v1/crawling/swagger
          - /api/v1/crawling/swagger-ui/**
          - /api/v1/crawling/docs/**

      # ============================================
      # Template Service
      # ============================================
      - id: template
        uri: ${TEMPLATE_URI:http://localhost:8084}
        paths:
          - /api/v1/templates/**
        public-paths:
          - /api/v1/templates/**

# ===============================================
# Logging (Local: DEBUG)
# ===============================================
logging:
  level:
    root: DEBUG
    com.ryuqq.gateway: DEBUG
    org.springframework.cloud.gateway: DEBUG
    org.springframework.web.reactive: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
